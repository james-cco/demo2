name: ğŸ”„ Auto Sync Upstream

on:
  schedule:
    - cron: '0 4 * * *' # æ¯å¤©å°ç£æ™‚é–“ä¸Šåˆ 12 é»è§¸ç™¼ï¼ˆUTC+8ï¼‰
  workflow_dispatch: # å…è¨±æ‰‹å‹•è§¸ç™¼

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ§© è¨­å®š Git ç’°å¢ƒ
        run: |
          git config --global user.email "james@cco.com.tw"
          git config --global user.name "james-cco"

      - name: â¬‡ï¸ Clone å€‰åº«
        uses: actions/checkout@v4
        with:
          persist-credentials: false

      - name: ğŸš€ æ·»åŠ  upstream ä¸¦åŒæ­¥
        run: |
          git remote add upstream https://github.com/james-cco/demo2.git
          git fetch upstream
          git checkout main
          git merge upstream/main --no-edit || echo "æ²’æœ‰è®Šæ›´"
          git push origin main
